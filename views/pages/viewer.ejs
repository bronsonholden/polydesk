<div id="wrapper" class="container-fluid">
  <div class="row">
    <div id="properties" class="col-md-3 cold-lg-3">
      <form id="metadata" method="POST" action="/viewer/<%- id -%>/metadata" enctype="multipart/form-data">
        <%
        var orderedMetadataSets = Object.keys(metadataSets).sort(function (a, b) {
          if (typeof(metadataSets[a].order) === 'number' && typeof(metadataSets[b].order) !== 'number') {
            return -1;
          } else if (typeof(metadataSets[a].order) !== 'number' && typeof(metadataSets[b].order) === 'number') {
            return 1;
          } else if (typeof(metadataSets[a].order) !== 'number' && typeof(metadataSets[b].order) !== 'number') {
            return 0;
          }
          return metadataSets[a].order - metadataSets[b].order;
        });
        orderedMetadataSets.forEach(function (setName, setOrder) {
          var set = metadataSets[setName].fields;
        %>
          <div class="metadataSet" name="<%- setName -%>" order="<%- setOrder -%>">
            <h4><%- setName -%></h4>
            <%
            var orderedFields = Object.keys(set).sort(function (a, b) {
              if (typeof(set[a].order) === 'number' && typeof(set[b].order) !== 'number') {
                return -1;
              } else if (typeof(set[a].order) !== 'number' && typeof(set[b].order) === 'number') {
                return 1;
              } else if (typeof(set[a].order) !== 'number' && typeof(set[b].order) !== 'number') {
                return 0;
              }
              return set[a].order - set[b].order;
            });
            orderedFields.forEach(function (key) {
            %>
              <div class="form-group metadataFieldSection">
                <label class="metadataFieldLabel"><%- key -%></label>
                <%
                switch (set[key].type) {
                case 'N':
                case 'P':
                case 'S':
                case 'B':
                %>
                  <input class="form-control metadataField metadataStringField" fieldType="<%- set[key].type -%>" fieldOrder="<%- set[key].order -%>" setName="<%- setName -%>" fieldName="<%- key -%>" type="string" value="<%- set[key].err || set[key].value -%>"></input>
                <%
                  break;
                case 'F':
                %>
                  <input class="form-control metadataField metadataStringField" fieldType="<%- set[key].type -%>" fieldOrder="<%- set[key].order -%>" setName="<%- setName -%>" fieldName="<%- key -%>" type="string" value="<%- set[key].err || set[key].calculated -%>" formula="<%- encodeURI(set[key].value) -%>"></input>
                <%
                  break;
                case 'NL':
                  set[key].value.forEach(function (val, idx, arr) {
                %>
                  <input class="form-control metadataField metadataRepeatingField metadataStringField" fieldType="<%- set[key].type -%>" fieldOrder="<%- set[key].order -%>" setName="<%- setName -%>" valueIndex="<%- idx -%>" fieldName="<%- key -%>" type="string" value="<%- val -%>"></input>
                <%
                  });
                %>
                  <!-- remove item -->
                <%
                  break;
                default:
                  break;
                }
              %>
              </div>
            <%
            });
            %>
          </div>
        <%
        });
        %>
        <div style="height:300px;">&nbsp;</div>
      </form>
    </div>
    <div id="viewer" class="pdf-viewer offset-md-3 offset-lg-3 col-md-9 col-lg-9"data-url="<%- documentUrl -%>">
      <div id="search" class="modal" role="dialog">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title">Search</h5>
            </div>
            <div class="modal-body">
              <input id="search-input" type="text" placeholder="Enter your search text"></input>
            </div>
            <div class="modal-footer">
              <button id="search-next-result" type="button" class="btn">Next</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
